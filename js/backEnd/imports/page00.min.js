function ldqrBaseBoutonMenu(){for(var e=document.querySelectorAll(".svg-bouton"),t=e.length,o=t-1;o>=0;o--)new ldqrBoutonMenu(e[o])}function ldqrBoutonMenu(e){this.el=e;for(var t=0;t<ldqr.START_EVENT.length;t++)this.el.addEventListener(ldqr.START_EVENT[t],this,!1)}function fonctionBouton(e){var t="",o=e.getAttribute("id");return e.hasClassName("bouton-choix-police")?t="font-name":e.hasClassName("font-size")?t="font-size":e.hasClassName("space-word")?t="space-word":e.hasClassName("space-car")?t="space-car":e.hasClassName("space-line")?t="space-line":e.hasClassName("couleur-fond")?t="couleur-fond":e.hasClassName("texte-image")?t="texte-image":e.hasClassName("couleur-image")?t="couleur-image":e.hasClassName("def-image")?t="def-image":e.hasClassName("def-image-00")?t="def-image":e.hasClassName("affiche-texte")?t="affiche-texte":e.hasClassName("affiche-image")?t="affiche-image":e.hasClassName("chiffre-dblTape")?t="vitesse-double-tape":"boutonBW"===o||"boutonCouleur"===o?t="couleur-image":e.hasClassName("bouton-version-active")?t="bouton-version-active":e.hasClassName("bouton-couleur-active")?t="bouton-couleur-active":e.hasClassName("bouton-dys-active")?t="bouton-dys-active":"vitesseAudioVal"===o?ldqr.DATA_LOCAL_FORAGE.setItem("vitesse-audio-voix",Math.round(100*ldqr.VITESSE_SON_VOIX)/100).then(function(e){}):"desactiverAudio"===o||"activerAudio"===o?ldqr.DATA_LOCAL_FORAGE.setItem("bouton-audio-active",o).then(function(e){new activerDesactiverBoutonAudio(o)}):"gras"!==o&&"italique"!==o&&"souligne"!==o&&"muet"!==o||(t="bouton-dys-choix"),t}function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows/i.test(e)?"Windows":/android/i.test(e)?"Android":(/iPad|iPhone|iPod/.test(e)&&window.MSStream,"iOS")}function affichagePageMenu(e){var t,o=document.getElementById("monTexte"),n=document.getElementById("Accueil"),a=!1;switch(e){case"AudioBoutonChoix":t=document.getElementById("configAudio"),a=!0;break;case"ErgoBoutonChoix":t=document.getElementById("configErgo"),a=!0;break;case"ImageBoutonChoix":t=document.getElementById("configImage"),a=!0;break;case"TexteBoutonChoix":t=document.getElementById("configTexte"),o.removeClassName("notDisplay"),a=!0;break;case"boutonValiderConfigAudio":t=document.getElementById("configAudio");break;case"boutonValiderConfigImage":t=document.getElementById("configImage");break;case"boutonValiderConfigTexte":t=document.getElementById("configTexte"),o.addClassName("notDisplay");break;case"boutonValiderConfigErgo":t=document.getElementById("configErgo")}a?(t.removeClassName("notDisplay"),n.addClassName("notDisplay")):(t.addClassName("notDisplay"),n.removeClassName("notDisplay"))}function copieLocalForage(){for(var e=document.querySelectorAll(".checked"),t=e.length,o=0;o!==t;o++)setLocalForage(e[o])}function appliqueLocalForage(){ldqr.DATA_LOCAL_FORAGE.getItem("font-name").then(function(e){e=e||"choixLucioleBold",new choixFontName(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("couleur-fond").then(function(e){e=e||ldqr.COULEURS_FOND_CSS_CLASS[0],new choixCouleurFond(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("texte-image").then(function(e){e=e||"texteImage"}),ldqr.DATA_LOCAL_FORAGE.getItem("def-image").then(function(e){e=e||"version01",new choixVersionImage(e),new choixVersionImage00}),ldqr.DATA_LOCAL_FORAGE.getItem("couleur-image").then(function(e){e=e||"boutonCouleur",new choixCouleurImage(e),new choixVersionImage00}),ldqr.DATA_LOCAL_FORAGE.getItem("bouton-version-active").then(function(e){e=e||"activerImageVersion",new activerDesactiverBoutonVersion(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("bouton-couleur-active").then(function(e){e=e||"activerCouleurImage",new activerDesactiverBoutonCouleur(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("bouton-dys-active").then(function(e){e=e||"desactiverDYS",new activerDesactiverBoutonDYS(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("bouton-audio-active").then(function(e){e=e||"activerAudio",new activerDesactiverBoutonAudio(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("bouton-dys-choix").then(function(e){e=e||[!1,!1,!1,!1],new activerDesactiverBoutonDYSchoix(e)}),ldqr.DATA_LOCAL_FORAGE.getItem("vitesse-audio-voix").then(function(e){e=e||1,ldqr.VITESSE_SON_VOIX=e;var t=document.getElementById("vitesseAudioVal"),o=t&&t.querySelector("text");o&&(o.innerHTML=e)})}ldqrBoutonMenu.prototype.touchStart=function(e){e.preventDefault();var t="",o="";switch(e.type){case"mousedown":case"mouseup":t=e.clientX,o=e.clientY;break;case"touchstart":case"touchend":t=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY}this.startX=t,this.startY=o;for(var n=0;n<ldqr.END_EVENT.length;n++)window.addEventListener(ldqr.END_EVENT[n],this,!1)},ldqrBoutonMenu.prototype.touchMove=function(e){e.preventDefault()},ldqrBoutonMenu.prototype.touchEnd=function(e){for(var t=this.el,o=0;o<ldqr.END_EVENT.length;o++)window.removeEventListener(ldqr.END_EVENT[o],this,!1);var n="",a="";switch(e.type){case"mousedown":case"mouseup":n=e.clientX,a=e.clientY;break;case"touchstart":case"touchend":n=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY}this.xTap=Math.abs(this.startX-n)<ldqr.TAP_THRESHOLD,this.yTap=Math.abs(this.startY-a)<ldqr.TAP_THRESHOLD,this.xTap&&this.yTap&&(e.preventDefault(),t.hasClassName("bouton-accueil")?document.location.href="./page00.xhtml":t.hasClassName("bouton-notice")?document.location.href="./notice_toc.xhtml":t.hasClassName("bouton-credits")?document.location.href="./credits.xhtml":t.hasClassName("pa-menu-bouton")?this.ouvreConfig():t.hasClassName("bouton-valider")?this.validerConfig():t.hasClassName("bouton-reinitialiser")&&this.reinitialiserConfig())},ldqrBoutonMenu.prototype.handleEvent=function(e){switch(e.type){case"touchstart":case"mousedown":this.touchStart(e);break;case"touchend":case"mouseup":this.touchEnd(e);break;case"touchmove":case"mousemove":this.touchMove(e)}},ldqrBoutonMenu.prototype.ouvreConfig=function(e){var t=this.el;affichagePageMenu(t.getAttribute("id"))},ldqrBoutonMenu.prototype.validerConfig=function(e){for(var t=this.el,o=document.querySelectorAll(".checked,#boutonCouleur"),n=o.length,a=0;a!==n;a++){var i=fonctionBouton(o[a]),u=o[a].getAttribute("id");"couleur-image"===i&&(u=document.getElementById("boutonCouleur").hasClassName("notDisplay")?"boutonCouleur":"boutonBW"),"bouton-dys-choix"===i&&(u=returnTabChoix(".bouton-dys-choix")),"vitesse-double-tape"===i&&(u=o[a].querySelector("text").innerHTML),ldqr.DATA_LOCAL_FORAGE.setItem(i,u).then(function(e){})}affichagePageMenu(t.getAttribute("id"))},ldqrBoutonMenu.prototype.reinitialiserConfig=function(e){var t=this.el,o=[];switch(t.getAttribute("id")){case"boutonReinitialiserConfigTexte":o=["font-name","couleur-fond","bouton-dys-active"];break;case"boutonReinitialiserConfigImage":o=["def-image","bouton-couleur-active","bouton-version-active","couleur-image"];break;case"boutonReinitialiserConfigAudio":o=["vitesse-audio-voix","bouton-audio-active"];break;case"boutonReinitialiserConfigErgo":o=["vitesse-double-tape"]}for(i=0;i!==o.length;i++)ldqr.DATA_LOCAL_FORAGE.removeItem(o[i]).then(function(){}).catch(function(e){});appliqueLocalForage()},window.addEventListener("DOMContentLoaded",function(){window.ldqrController=new ldqrBaseBoutonMenu},!1);